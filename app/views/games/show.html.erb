<div class="game-show">
  <div class="d-flex justify-content-between align-items-start">
    <h1><%= @game.title %></h1>
    <div>
<<<<<<< Updated upstream
      <%= link_to "‚Üê –í—Å–µ –∏–≥—Ä—ã", games_path, class: "btn btn-outline-secondary" %>
      <%= link_to "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", edit_game_path(@game), class: "btn btn-outline-primary" %>
      <%= link_to "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å", @game, 
          method: :delete, 
          class: "btn btn-outline-danger",
          data: { confirm: "–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä—É '#{@game.title}'?" } %>
=======
      <h1 class="mb-1"><%= @game.title %></h1>
      <% if @game.metacritic_score.present? %>
        <div class="d-flex align-items-center mt-2">
          <strong class="me-2">–†–µ–π—Ç–∏–Ω–≥:</strong>
          <div class="metacritic-badge">
            <span class="badge bg-<%= @game.metacritic_score >= 75 ? 'success' : @game.metacritic_score >= 50 ? 'warning' : 'danger' %> fs-6">
              <%= @game.metacritic_score %>/100
            </span>
            <small class="text-muted ms-2">Metacritic</small>
          </div>
        </div>
      <% end %>
    </div>
    
    <div class="btn-group" role="group">
      <%= link_to "‚Üê –í—Å–µ –∏–≥—Ä—ã", games_path, class: "btn btn-outline-secondary" %>
      <%= link_to "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", edit_game_path(@game), class: "btn btn-outline-primary" %>
      <!-- –£–ü–†–û–©–ï–ù–ù–ê–Ø –ö–ù–û–ü–ö–ê –†–ï–¶–ï–ù–ó–ò–ò -->
      <% if user_signed_in? %>
        <%# –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ä–µ—Ü–µ–Ω–∑–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è %>
        <% user_review = @game.reviews.find_by(user_id: current_user.id) %>
        
        <% if user_review %>
          <%= link_to "üìù –ú–æ—è —Ä–µ—Ü–µ–Ω–∑–∏—è", edit_review_path(user_review), class: "btn btn-outline-warning" %>
        <% else %>
          <%= link_to "üìù –ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é", new_game_review_path(@game), class: "btn btn-outline-success" %>
        <% end %>
      <% end %>
      <%= form_with(model: @game, method: :delete, local: true, 
    html: { class: "d-inline" }) do |form| %>
  <%= form.submit "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å", 
        class: "btn btn-outline-danger",
        data: { confirm: "–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä—É '#{@game.title}'?" } %>
<% end %>
>>>>>>> Stashed changes
    </div>
  </div>
  
  <div class="row mt-4">
    <% if @game.cover_url.present? %>
<<<<<<< Updated upstream
      <div class="col-md-4">
        <img src="<%= @game.cover_url %>" 
             alt="<%= @game.title %>" 
             class="img-fluid rounded shadow"
             style="max-height: 400px; object-fit: cover;">
=======
      <div class="col-lg-4 col-md-5 mb-4">
        <img src="<%= @game.cover_url %>" 
             alt="<%= @game.title %>" 
             class="img-fluid rounded shadow"
             style="max-height: 400px; width: 100%; object-fit: cover;">
        
        <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–¥ –æ–±–ª–æ–∂–∫–æ–π -->
        <div class="mt-3">
          <% if user_signed_in? %>
            <div class="alert alert-info text-center">
              <i class="bi bi-info-circle"></i>
              –§—É–Ω–∫—Ü–∏–∏ –≤–∏—à–ª–∏—Å—Ç–∞ –∏ –∫–æ–ª–ª–µ–∫—Ü–∏–π –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–∑–∂–µ
            </div>
          <% else %>
            <div class="alert alert-info text-center">
              <i class="bi bi-info-circle"></i>
              <%= link_to "–í–æ–π–¥–∏—Ç–µ", new_user_session_path, class: "alert-link" %> 
              –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
            </div>
          <% end %>
        </div>
>>>>>>> Stashed changes
      </div>
    <% end %>
    
    <div class="<%= @game.cover_url.present? ? 'col-md-8' : 'col-12' %>">
      <div class="card">
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-md-6">
<<<<<<< Updated upstream
              <p><strong>üìÖ –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞:</strong> <%= @game.release_date %></p>
            </div>
            <% if @game.metacritic_score.present? %>
              <div class="col-md-6">
                <p>
                  <strong>‚≠ê Metacritic:</strong> 
                  <span class="badge bg-<%= @game.metacritic_score >= 75 ? 'success' : @game.metacritic_score >= 50 ? 'warning' : 'danger' %>">
                    <%= @game.metacritic_score %>/100
                  </span>
                </p>
              </div>
            <% end %>
          </div>
          
          <% if @game.developers.any? %>
            <p><strong>üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏:</strong> <%= @game.developer_names %></p>
          <% end %>
          
          <h5 class="mt-4">üìñ –û–ø–∏—Å–∞–Ω–∏–µ</h5>
          <div class="description-box p-3 bg-light rounded">
            <%= simple_format(@game.description) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
=======
              <div class="detail-item mb-3">
                <h6 class="text-muted mb-1">
                  <i class="bi bi-calendar"></i> –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞
                </h6>
                <p class="fs-5">
                  <% if @game.release_date %>
                    <%= @game.release_date.strftime("%d.%m.%Y") %>
                    <% if @game.release_date > Date.today %>
                      <span class="badge bg-warning text-dark ms-2">
                        <i class="bi bi-clock"></i> –°–∫–æ—Ä–æ
                      </span>
                    <% end %>
                  <% else %>
                    <span class="text-muted">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span>
                  <% end %>
                </p>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="detail-item mb-3">
                <h6 class="text-muted mb-1">
                  <i class="bi bi-people"></i> –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏
                </h6>
                <div>
                  <% if @game.developers.any? %>
                    <% @game.developers.each do |developer| %>
                      <span class="badge bg-info text-decoration-none me-1 mb-1">
                        <%= developer.name %>
                      </span>
                    <% end %>
                  <% else %>
                    <span class="text-muted">–ù–µ —É–∫–∞–∑–∞–Ω—ã</span>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
          
          <!-- –û–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä—ã -->
          <div class="description-section">
            <h5 class="mb-3">
              <i class="bi bi-journal-text"></i> –û–ø–∏—Å–∞–Ω–∏–µ
            </h5>
            <div class="description-box p-4 bg-light rounded">
              <% if @game.description.present? %>
                <%= simple_format(@game.description) %>
              <% else %>
                <p class="text-muted text-center py-3">
                  <i class="bi bi-info-circle"></i> –û–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
                </p>
              <% end %>
            </div>
          </div>
          
          <!-- –ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
          <div class="row mt-4">
            <div class="col-md-6">
              <div class="card">
                <div class="card-body text-center">
                  <h3 class="text-primary"><%= @game.reviews.count %></h3>
                  <p class="text-muted mb-0">—Ä–µ—Ü–µ–Ω–∑–∏–π</p>
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="card">
                <div class="card-body text-center">
                  <% if @game.reviews.any? %>
                    <h3 class="text-danger">
                      <%= @game.reviews.average(:rating).to_f.round(1) %>/10
                    </h3>
                    <p class="text-muted mb-0">—Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞</p>
                  <% else %>
                    <h3 class="text-danger">‚Äî</h3>
                    <p class="text-muted mb-0">–Ω–µ—Ç –æ—Ü–µ–Ω–æ–∫</p>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- –†–∞–∑–¥–µ–ª —Ä–µ—Ü–µ–Ω–∑–∏–π -->
  <div class="row mt-5">
    <div class="col-12">
      <h3 class="mb-4">üìù –†–µ—Ü–µ–Ω–∑–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h3>
      
      <% if user_signed_in? %>
        <div class="mb-4">
          <!-- –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ find_by -->
          <% user_review = @game.reviews.find_by(user_id: current_user.id) %>
          
          <% if user_review %>
            <%= link_to "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ—é —Ä–µ—Ü–µ–Ω–∑–∏—é", edit_review_path(user_review), 
                class: "btn btn-warning me-2" %>
          <% else %>
            <%= link_to "‚ûï –ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é", new_game_review_path(@game), 
                class: "btn btn-primary me-2" %>
          <% end %>
          
          <% if @game.reviews.any? %>
            <%= link_to "üëÅÔ∏è –í—Å–µ —Ä–µ—Ü–µ–Ω–∑–∏–∏ (#{@game.reviews.count})", game_reviews_path(@game), 
                class: "btn btn-outline-secondary" %>
          <% end %>
        </div>
      <% else %>
        <div class="alert alert-info mb-4">
          <%= link_to "–í–æ–π–¥–∏—Ç–µ", new_user_session_path, class: "alert-link" %> 
          —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é
        </div>
      <% end %>
      
      <% if @game.reviews.any? %>
        <% @game.reviews.order(created_at: :desc).each do |review| %>
          <div class="card mb-3">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h5><%= review.title %></h5>
                  <p class="text-muted small mb-2">
                    <%= review.user.email %> ‚Ä¢ <%= review.created_at.strftime("%d.%m.%Y") %>
                  </p>
                </div>
                <div class="text-end">
                  <span class="badge bg-warning fs-6"><%= review.rating %>/10</span>
                </div>
              </div>
              <p><%= review.content %></p>
              
              <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Ü–µ–Ω–∑–∏–∏ -->
              <% if review.user == current_user %>
                <div class="mt-2">
                  <%= link_to "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", edit_review_path(review), 
                      class: "btn btn-sm btn-outline-warning me-2" %>
                  <%= link_to "–£–¥–∞–ª–∏—Ç—å", review_path(review), 
                      method: :delete,
                      class: "btn btn-sm btn-outline-danger",
                      data: { confirm: "–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–Ω–∑–∏—é?" } %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      <% else %>
        <div class="alert alert-info">
          <p>–ü–æ–∫–∞ –Ω–µ—Ç —Ä–µ—Ü–µ–Ω–∑–∏–π –Ω–∞ —ç—Ç—É –∏–≥—Ä—É.</p>
        </div>
      <% end %>
    </div>
  </div>
</div>

<style>
.game-show .detail-item {
  padding: 10px;
  border-radius: 8px;
  background: #f8f9fa;
}

.game-show .description-box {
  line-height: 1.8;
  font-size: 1.05rem;
}

.game-show .metacritic-badge {
  display: inline-flex;
  align-items: center;
}

.game-show .btn-group .btn {
  border-radius: 6px;
  margin-left: 5px;
}

.game-show img {
  transition: transform 0.3s;
}

.game-show img:hover {
  transform: scale(1.02);
}

.description-section {
  margin-top: 30px;
  padding-top: 20px;
  border-top: 1px solid #e0e0e0;
}
</style>
>>>>>>> Stashed changes
