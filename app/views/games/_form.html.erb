<%= form_with(model: game, local: true, html: { class: "needs-validation" }) do |form| %>
  <% if game.errors.any? %>
    <div class="alert alert-danger">
      <h4 class="alert-heading"><%= pluralize(game.errors.count, "error") %> –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É:</h4>
      <ul class="mb-0">
        <% game.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3">
    <%= form.label :title, "–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã*", class: "form-label" %>
    <%= form.text_field :title, class: "form-control", required: true, placeholder: "The Witcher 3: Wild Hunt" %>
    <div class="form-text">–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</div>
  </div>

  <div class="mb-3">
    <%= form.label :description, "–û–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä—ã", class: "form-label" %>
    <%= form.text_area :description, class: "form-control", rows: 6, 
          placeholder: "–û–ø–∏—à–∏—Ç–µ —Å—é–∂–µ—Ç, –≥–µ–π–º–ø–ª–µ–π, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã..." %>
  </div>

  <div class="row">
    <div class="col-md-6 mb-3">
      <%= form.label :release_date, "–î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞*", class: "form-label" %>
      <%= form.date_field :release_date, class: "form-control", required: true %>
    </div>
    
    <div class="col-md-6 mb-3">
      <%= form.label :metacritic_score, "–†–µ–π—Ç–∏–Ω–≥ Metacritic", class: "form-label" %>
      <%= form.number_field :metacritic_score, 
            class: "form-control", 
            min: 0, 
            max: 100,
            placeholder: "0-100" %>
      <div class="form-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞</div>
    </div>
  </div>

  <div class="mb-3">
    <%= form.label :cover_url, "–°—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–ª–æ–∂–∫—É", class: "form-label" %>
    <%= form.text_field :cover_url, 
          class: "form-control", 
          placeholder: "https://example.com/game-cover.jpg" %>
    <div class="form-text">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 300x400px</div>
    
    <% if game.cover_url.present? %>
      <div class="mt-2">
        <strong>–¢–µ–∫—É—â–∞—è –æ–±–ª–æ–∂–∫–∞:</strong><br>
        <img src="<%= game.cover_url %>" 
             alt="–û–±–ª–æ–∂–∫–∞" 
             class="img-thumbnail mt-2" 
             style="max-height: 150px;">
      </div>
    <% end %>
  </div>

  <div class="mb-3">
    <%= form.label :developer_ids, "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏", class: "form-label" %>
    <%= form.collection_select :developer_ids, 
          Developer.all,           # –í—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑ –ë–î
          :id,                     # –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º (ID)
          :name,                   # –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º (–Ω–∞–∑–≤–∞–Ω–∏–µ)
          { include_blank: "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤..." }, 
          { multiple: true, class: "form-select", size: 4 } %>
    <div class="form-text">
      –£–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ Ctrl (Cmd –Ω–∞ Mac) –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö
    </div>
  </div>

  <div class="mt-4">
    <%= form.submit game.persisted? ? "üíæ –û–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É" : "üéÆ –°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É", 
          class: "btn btn-primary me-2" %>
    <%= link_to "‚ùå –û—Ç–º–µ–Ω–∞", games_path, class: "btn btn-outline-secondary" %>
  </div>
<% end %>